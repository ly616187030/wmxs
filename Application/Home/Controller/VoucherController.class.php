<?phpnamespace Home\Controller;use User\Api\UserApi;class VoucherController extends HomeController {    function _initialize(){        parent::_initialize();        $this->assign('_controller',CONTROLLER_NAME);    }    public function index()    {        $this->login();        $uid = is_login();        //echo $uid;  //查看当前用户登录的ID        $name = M('member_juan');        // $userCount = $name->count("uid");        // echo $userCount;          //查看用户总数        $data = $name->where("is_use=1 and uid=".$uid)->select();  //未使用的代金劵        if($data)        {            $this->assign('list',$data);        }else{            $this->assign('listsss','您暂无未使用的代金劵！');        }        $res = $name->where("is_use=0 and uid=".$uid)->select();    //已使用的代金劵        if($res)        {            $this->assign('lists',$res);        }else{            $this->assign('listsst','您暂无已使用的代金劵！');        }        $rs = $name->where("quantity>10 and uid=".$uid)->select();      //已失效的代金劵        if($rs)        {            $this->assign('listt',$rs);        }        else{            $this->assign('listss','您暂无已失效的代金劵！');        }       $yz =isset($_POST['yz'])?$_POST['yz']:'';     // echo $yz;       // dump($name);       // print_r($name->select()) ;            if(!empty($yz))            {                $add = $name->where("money=".$yz)->select();     //查询uid是否等于from表中输入的值                if(is_array($add))                {                    $name-> where('is_use = 2')->setField('is_use','1');                    $this->assign('chenggong','验证成功，请到未使用页面使用！');//将验证信息返回到HTML                }  else                {                    //  $this->error('验证失败，请核对验证码是否正确！');                    $this->assign('shibai','验证失败，请核对验证码信息！');                }            }            else            {                $this->assign('yanzheng','请输入验证码！');            }        $this->assign('is_login',is_login());              $this->display();    }}