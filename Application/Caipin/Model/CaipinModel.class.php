<?phpnamespace Caipin\Model;use Think\Model;class CaipinModel extends Model{    protected $_validate = array(        array('cp_name','require','请输入菜品名称',1,'regex',3),        //array('cm_name','getCmname','餐品名称已经存在！',1,'callback',1),        //array('store_id','require','请选择所属店铺',1,'regex',3),//        array('canping_id','require','请选择餐品分类',1,'regex',3),//        array('sp_id','require','请选择盛用器具',1,'regex',3),        //array('big_img','require','请上传餐品大图',1,'regex',3),        array('original_price','require','请输入菜品原价',1,'regex',3),        //array('original_price','getPrice','价格不能为0或者负数',1,'callback',3),        array('now_price','require','请输入菜品现价',1,'regex',3),        array('danwei','require','请输入菜品单位',1,'regex',3),//        array('sort_order','number','排序必须是数字',2,'regex',3),    );    protected function getPrice(){        $oprice = I('post.original_price');        $nprice = I('post.now_price');        if($oprice <= 0 || $nprice <= 0){            return false;        }    }    protected function getCmname(){        $cm_name = I('post.cm_name');        $id = session('user_auth.uid');        $canming = M('Canming');        $store = M('Store');        $store_id = $store->where('uid = '.$id)->field("store_id")->find();        $where['store_id'] = $store_id['store_id'];        $where['cm_name'] = $cm_name;        $clist = $canming->where($where)->count();        if($clist > 0){            return false;        }    }}